<!DOCTYPE html>
<html lang="en-UK">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Components | machinable</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="icon" href="/logo.png">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/icons/apple-touch-icon-152x152.png">
    <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#3eaf7c">
    <meta name="description" content="A modular configuration system for machine learning research">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/assets/css/0.styles.91c4c62a.css" as="style"><link rel="preload" href="/assets/js/app.082e46fc.js" as="script"><link rel="preload" href="/assets/js/2.383fb925.js" as="script"><link rel="preload" href="/assets/js/11.ac68453c.js" as="script"><link rel="preload" href="/assets/js/3.1859d6b9.js" as="script"><link rel="prefetch" href="/assets/js/10.cffc5242.js"><link rel="prefetch" href="/assets/js/12.a49e8a2c.js"><link rel="prefetch" href="/assets/js/13.59b8c90d.js"><link rel="prefetch" href="/assets/js/14.c9314005.js"><link rel="prefetch" href="/assets/js/15.eb30f0c1.js"><link rel="prefetch" href="/assets/js/16.21a07bbd.js"><link rel="prefetch" href="/assets/js/17.de93cbe0.js"><link rel="prefetch" href="/assets/js/18.0e39331b.js"><link rel="prefetch" href="/assets/js/19.7d1d58a1.js"><link rel="prefetch" href="/assets/js/20.c0a859ff.js"><link rel="prefetch" href="/assets/js/21.4649f72f.js"><link rel="prefetch" href="/assets/js/22.d12ef861.js"><link rel="prefetch" href="/assets/js/23.6c44098c.js"><link rel="prefetch" href="/assets/js/24.3cb49fe5.js"><link rel="prefetch" href="/assets/js/25.74366bf3.js"><link rel="prefetch" href="/assets/js/26.b6c28424.js"><link rel="prefetch" href="/assets/js/27.3a733010.js"><link rel="prefetch" href="/assets/js/28.bbc5ce0c.js"><link rel="prefetch" href="/assets/js/29.aad89a20.js"><link rel="prefetch" href="/assets/js/30.e54b1fb8.js"><link rel="prefetch" href="/assets/js/31.9eb9f9b6.js"><link rel="prefetch" href="/assets/js/32.10639d1e.js"><link rel="prefetch" href="/assets/js/33.97d7e7da.js"><link rel="prefetch" href="/assets/js/34.d0c51eb7.js"><link rel="prefetch" href="/assets/js/35.722c7dba.js"><link rel="prefetch" href="/assets/js/36.4dcf4e8a.js"><link rel="prefetch" href="/assets/js/37.dedf0b4a.js"><link rel="prefetch" href="/assets/js/38.9b430043.js"><link rel="prefetch" href="/assets/js/39.ba4e72b8.js"><link rel="prefetch" href="/assets/js/4.2444cf73.js"><link rel="prefetch" href="/assets/js/40.79704bc9.js"><link rel="prefetch" href="/assets/js/41.8d8ed3a5.js"><link rel="prefetch" href="/assets/js/42.de7fe1a6.js"><link rel="prefetch" href="/assets/js/5.7253180e.js"><link rel="prefetch" href="/assets/js/6.a6830f02.js"><link rel="prefetch" href="/assets/js/7.2cf0207d.js"><link rel="prefetch" href="/assets/js/8.e0616c20.js"><link rel="prefetch" href="/assets/js/9.b8197d69.js">
    <link rel="stylesheet" href="/assets/css/0.styles.91c4c62a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">machinable</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/guide/" class="nav-link router-link-active">
  Guide
</a></div><div class="nav-item"><a href="/reference/" class="nav-link">
  Reference
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Learn More" class="dropdown-title"><span class="title">Learn More</span> <span class="arrow down"></span></button> <button type="button" aria-label="Learn More" class="mobile-dropdown-title"><span class="title">Learn More</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Adoption
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/miscellaneous/migration-guide.html" class="nav-link">
  Migrating to machinable
</a></li><li class="dropdown-subitem"><a href="/faq/" class="nav-link">
  FAQ
</a></li><li class="dropdown-subitem"><a href="https://github.com/machinable-org/machinable/blob/master/CHANGELOG.md" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Changelog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          Meta
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/miscellaneous/contribution-guide.html" class="nav-link">
  Contribution guide
</a></li></ul></li></ul></div></div> <a href="https://github.com/machinable-org/machinable" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/guide/" class="nav-link router-link-active">
  Guide
</a></div><div class="nav-item"><a href="/reference/" class="nav-link">
  Reference
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Learn More" class="dropdown-title"><span class="title">Learn More</span> <span class="arrow down"></span></button> <button type="button" aria-label="Learn More" class="mobile-dropdown-title"><span class="title">Learn More</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Adoption
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/miscellaneous/migration-guide.html" class="nav-link">
  Migrating to machinable
</a></li><li class="dropdown-subitem"><a href="/faq/" class="nav-link">
  FAQ
</a></li><li class="dropdown-subitem"><a href="https://github.com/machinable-org/machinable/blob/master/CHANGELOG.md" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Changelog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          Meta
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/miscellaneous/contribution-guide.html" class="nav-link">
  Contribution guide
</a></li></ul></li></ul></div></div> <a href="https://github.com/machinable-org/machinable" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Essentials</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/installation.html" class="sidebar-link">Installation</a></li><li><a href="/guide/" aria-current="page" class="sidebar-link">Introduction</a></li><li><a href="/guide/projects.html" class="sidebar-link">Project structure</a></li><li><a href="/guide/machinable-yaml.html" class="sidebar-link">machinable.yaml</a></li><li><a href="/guide/components.html" aria-current="page" class="active sidebar-link">Components</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/components.html#execution" class="sidebar-link">Execution</a></li><li class="sidebar-sub-header"><a href="/guide/components.html#life-cycle" class="sidebar-link">Life cycle</a></li><li class="sidebar-sub-header"><a href="/guide/components.html#self-config" class="sidebar-link">self.config</a></li><li class="sidebar-sub-header"><a href="/guide/components.html#self-flags" class="sidebar-link">self.flags</a></li><li class="sidebar-sub-header"><a href="/guide/components.html#self-storage" class="sidebar-link">self.storage</a></li><li class="sidebar-sub-header"><a href="/guide/components.html#config-methods" class="sidebar-link">Config methods</a></li><li class="sidebar-sub-header"><a href="/guide/components.html#composition" class="sidebar-link">Composition</a></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Execution In-depth</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/execution.html" class="sidebar-link">Overview</a></li><li><a href="/guide/experiments.html" class="sidebar-link">Experiments</a></li><li><a href="/guide/engines.html" class="sidebar-link">Engines</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Reusability &amp; Composition</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/composition.html" class="sidebar-link">Component composition</a></li><li><a href="/guide/imports.html" class="sidebar-link">Sharing and importing projects</a></li><li><a href="/guide/mixins.html" class="sidebar-link">Mixins</a></li><li><a href="/guide/exporting.html" class="sidebar-link">Exporting executions</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Results &amp; Analysis</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/submission.html" class="sidebar-link">Submissions</a></li><li><a href="/guide/indexes.html" class="sidebar-link">Indexes</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="components"><a href="#components" class="header-anchor">#</a> Components</h1> <p>Components are the core interface to implement functionality in a machinable project. Technically, they are simply classes that inherit from the base class <code>machinable.Component</code> as defined in the python module that is specified in the
<code>machinable.yaml</code>. For instance, to implement a components that encapsulates some optimization problem, we could create the following source file:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># optimization.py</span>
<span class="token keyword">from</span> machinable <span class="token keyword">import</span> Component

<span class="token keyword">class</span> <span class="token class-name">DummyOptimization</span><span class="token punctuation">(</span>Component<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">on_create</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>
            <span class="token string">&quot;Creating the optimization model with the following configuration: &quot;</span><span class="token punctuation">,</span>
            self<span class="token punctuation">.</span>config<span class="token punctuation">,</span>
        <span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">on_execute</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;Training step&quot;</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span>
</code></pre></div><p>Note that it does not matter how you name the class as long as the class inherits from the components base class and is registered in the <code>machinable.yaml</code>, for instance:</p> <div id="annotation-canvas-optimization" class="annotation-container"><div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">components</span><span class="token punctuation">:</span>
 <span class="token punctuation">-</span> <span class="token key atrule">optimization</span><span class="token punctuation">:</span> 
     <span class="token key atrule">learning_rate</span><span class="token punctuation">:</span> <span class="token number">0.1</span>
</code></pre></div> <div class="annotation"><img src="/pointer-white.svg" title="Hover for information" style="width: 50px; height: 50px;"></div> <!----></div> <h2 id="execution"><a href="#execution" class="header-anchor">#</a> Execution</h2> <p>The key idea of a component is to encapsulate an executable unit of your code. It is useful to think of them as 'functions' that you can call with different configuration arguments. In fact, executing a component is not very different from a standard function call:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> machinable <span class="token keyword">import</span> execute
execute<span class="token punctuation">(</span><span class="token string">&quot;optimization&quot;</span><span class="token punctuation">)</span>
</code></pre></div><p>Component <a href="/guide/execution.html">execution</a> will be covered in greater detail later, but at this point, it is useful to think of it as a function call that provides arguments (i.e. the configuration, a random seed, a directory to store results etc.) and that triggers the component code.
The Component class can thus be seen as providing a variety of interfaces that bootstrap the implementation of the 'component function' for given arguments.</p> <h2 id="life-cycle"><a href="#life-cycle" class="header-anchor">#</a> Life cycle</h2> <p>Components expose a number of life cycle events that can be overwritten to hook into the execution 'function call' at a certain point. All event methods start with <code>on_</code> and are documented in the <a href="/reference/component.html">event reference</a>. In the example above, the <code>on_create</code> and <code>on_execute</code> events are implemented and will thus be triggered during execution.</p> <p>The components life cycle allows you to implement using any framework and standard python methods without worrying about the execution logic (i.e. configuration parsing, parallel execution, etc.). Moreover, the event paradigm provides a clear semantic while the object orientation enables flexible code sharing mechanisms (e.g. inheritance, <a href="/guide/mixins.html">mixins</a>, etc.).</p> <h2 id="self-config"><a href="#self-config" class="header-anchor">#</a> self.config</h2> <p>Components can consume their configuration via the <code>self.config</code> object:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> machinable <span class="token keyword">import</span> Component

<span class="token keyword">class</span> <span class="token class-name">MyComponent</span><span class="token punctuation">(</span>Component<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">on_create</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>config<span class="token punctuation">.</span>config_value<span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>config<span class="token punctuation">.</span>nested<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>config<span class="token punctuation">[</span><span class="token string">&quot;nested&quot;</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">&quot;value&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

</code></pre></div><div class="language- extra-class"><pre><code>&gt;&gt;&gt; 1
    2
    2
</code></pre></div><p>For convenience, the dict interface can be accessed using the <code>.</code> object notation and provides a few helper methods like pretty-printing <code>pprint</code> etc.</p> <h2 id="self-flags"><a href="#self-flags" class="header-anchor">#</a> self.flags</h2> <p>Flags are configuration values that are associated with the particular execution, for example the random seeds or worker IDs. They are accessible via the <code>self.flags</code> object, that supports the <code>.</code> object notation. You can add your own flags through basic assignment, e.g. <code>self.flags.counter = 1</code>. To avoid name collision, all native machinable flags use UPPERCASE (e.g. <code>self.flags.SEED</code>).</p> <h2 id="self-storage"><a href="#self-storage" class="header-anchor">#</a> self.storage</h2> <p><code>self.storage</code> provides access to the storage directory of the component (each component directy name is unique and managed automatically so you don't have to specify where the data is being stored). The data can later be retrieved using the <a href="/guide/storage.html">storage interfaces</a>.</p> <p><strong>Log</strong></p> <p><code>self.storage.log</code> or <code>self.log</code> provides a standard logger interface that outputs to the console and a log file.</p> <div class="language-python extra-class"><pre class="language-python"><code>self<span class="token punctuation">.</span>log<span class="token punctuation">.</span>info<span class="token punctuation">(</span><span class="token string">'Component created'</span><span class="token punctuation">)</span>
self<span class="token punctuation">.</span>log<span class="token punctuation">.</span>debug<span class="token punctuation">(</span><span class="token string">'Component initialized'</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>Records</strong></p> <p><code>self.storage.record</code> or <code>self.record</code> provides an interface for tabular logging, that is, storing recurring data points at each iteration. The results become available as a table where each row represents each iteration.</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">for</span> iteration <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    self<span class="token punctuation">.</span>record<span class="token punctuation">[</span><span class="token string">'iteration'</span><span class="token punctuation">]</span> <span class="token operator">=</span> iteration
    loss<span class="token punctuation">,</span> acc <span class="token operator">=</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token comment"># write column values</span>
    self<span class="token punctuation">.</span>record<span class="token punctuation">[</span><span class="token string">'accuracy'</span><span class="token punctuation">]</span> <span class="token operator">=</span> acc
    self<span class="token punctuation">.</span>record<span class="token punctuation">[</span><span class="token string">'loss'</span><span class="token punctuation">]</span> <span class="token operator">=</span> loss

    <span class="token comment"># save at the end of the iteration to start a new row</span>
    self<span class="token punctuation">.</span>record<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>If you use the <code>on_execute_iteration</code> event, iteration information and <code>record.save()</code> will be triggered automatically at the end of each iteration.</p> <p>Sometimes it is useful to have multiple tabular loggers, for example to record training and validation performance separately. You can create custom record loggers using <code>self.storage.get_record_writer(scope)</code> which returns a new instance of a record writer that you can use just like the main record writer.</p> <p><strong>Custom data</strong></p> <p>Any other data can be stored in the <code>data/</code> subdirectory.</p> <p>You can use <code>self.storage.write_data()</code> to write any other Python object, for example:</p> <div class="language-python extra-class"><pre class="language-python"><code>self<span class="token punctuation">.</span>storage<span class="token punctuation">.</span>save_data<span class="token punctuation">(</span><span class="token string">'data.txt'</span><span class="token punctuation">,</span> <span class="token string">'a string'</span><span class="token punctuation">)</span>
self<span class="token punctuation">.</span>storage<span class="token punctuation">.</span>save_data<span class="token punctuation">(</span><span class="token string">'data.p'</span><span class="token punctuation">,</span> generic_object<span class="token punctuation">)</span>
self<span class="token punctuation">.</span>storage<span class="token punctuation">.</span>save_data<span class="token punctuation">(</span><span class="token string">'data.json'</span><span class="token punctuation">,</span> jsonable_object<span class="token punctuation">)</span>
self<span class="token punctuation">.</span>storage<span class="token punctuation">.</span>save_data<span class="token punctuation">(</span><span class="token string">'data.npy'</span><span class="token punctuation">,</span> numpy_array<span class="token punctuation">)</span>
</code></pre></div><p>To protect against unintended data loss, you can set <code>overwrite=False</code>.</p> <h2 id="config-methods"><a href="#config-methods" class="header-anchor">#</a> Config methods</h2> <p>While config references allow you to make static references, configuration values can be more complex. They might, for example, evolve during the course of execution or obey non-trivial conditions. Config methods allow you to implement such complex configuration values. To define a config method just add a regular Python method to the components class. The method name must start with <code>config_</code>. You can then 'call' the method directly in the <code>machinable.yaml</code> configuration, for example:</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">components</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">my_network</span><span class="token punctuation">:</span>
      <span class="token key atrule">batch_size</span><span class="token punctuation">:</span> <span class="token number">32</span>
      <span class="token key atrule">learning_rate</span><span class="token punctuation">:</span> base_learning_rate(2<span class="token important">**-5)</span>
</code></pre></div><p>Here, the learning rate parameter is defined as a config method that takes a base learning rate parameter. The config method <code>config_base_learning_rate</code> needs to be defined in the corresponding component:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> machinable <span class="token keyword">import</span> Component

<span class="token keyword">class</span> <span class="token class-name">MyBaseModel</span><span class="token punctuation">(</span>Component<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">on_create</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Training with lr='</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>config<span class="token punctuation">.</span>learning_rate<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">config_base_learning_rate</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> lr<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> lr <span class="token operator">*</span> self<span class="token punctuation">.</span>config<span class="token punctuation">.</span>batch_size
</code></pre></div><p>The method is executed whenever <code>self.config.learning_rate</code> is being accessed; as a result, the execution output prints:</p> <div class="language- extra-class"><pre><code>&gt;&gt;&gt; 'Training with lr=1'
</code></pre></div><p>Config methods hence allow for the expression of arbitrary configuration dependencies and are a powerful tool for implementing complex configuration patterns more efficiently. They can also be useful for parsing configuration values into Python objects. For instance, you might define a config method <code>dtype</code> where <code>dtype: dtype('f32')</code> returns <code>np.float32</code> etc.</p> <h2 id="composition"><a href="#composition" class="header-anchor">#</a> Composition</h2> <p>Components can be composed together to form new components. Learn more about <a href="/guide/composition.html">Reusability &amp; Composition</a> of components.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/machinable-org/machinable/edit/master/docs/guide/components.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">10/9/2020, 12:59:40 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/guide/machinable-yaml.html" class="prev">
        machinable.yaml
      </a></span> <span class="next"><a href="/guide/execution.html">
        Overview
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.082e46fc.js" defer></script><script src="/assets/js/2.383fb925.js" defer></script><script src="/assets/js/11.ac68453c.js" defer></script><script src="/assets/js/3.1859d6b9.js" defer></script>
  </body>
</html>
